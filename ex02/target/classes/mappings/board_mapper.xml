<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.song.web.board.mapper.BoardMapper">
	<select id="getList" resultType="BoardVO">
	<![CDATA[
		SELECT * FROM(
		SELECT /* + INDEX_DESC(TBL_BOARD SYS_C007513)*/ ROWNUM RN, BNO,TITLE,CONTENT,WIRTER,REGDATE
		FROM TBL_BOARD
		WHERE ROWNUM <  #{pageNum} * #{amount})
		WHERE RN> (#{pageNum}-1 *#{amount}
		]]>
	</select>
	<select id="read" resultType="BoardVO">
		SELECT BNO,
				TITLE,
				CONTENT,
				WRITER,
				REGDATE,
				UPDATEDATE
		FROM TBL_BOARD
		WHERE BNO=#{bno}
	</select>
	<insert id="insert">
		<selectKey keyProperty="bno" resultType="long" order="BEFORE">
			SELECT SEQ_BOARD.NEXTVAL FROM DUAL
		</selectKey>
			INSERT
			INTO TBL_BOARD(BNO,
							TITLE,
							CONTENT,
							WRITER
							)
			VALUES(#{bno},
					#{title},
					#{content},
					#{writer}
					)
	</insert>
	<delete id="delete">
	DELETE 
	FROM TBL_BOARD
	WHERE BNO = #{bno}
	</delete>
	
	<update id="update">
	UPDATE TBL_BOARD
	SET TITLE=#{title},
		CONTENT=#{content},
		WRITER=#{writer},
		UPDATEDATE=sysdate
		WHERE BNO=#{bno}
	</update>
</mapper>